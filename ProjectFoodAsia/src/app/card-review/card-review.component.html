


<div style="min-height: 420px ">
        <!-- Card List -->
        <div class="container" *ngIf="cards" style="padding-left: 30px; padding-right: 30px;">
        
            <div class="row" style="padding:10px; ">
              <div class="col-md-6 offset-md-3"><h3 align="center"><b>My Saved Cards</b></h3></div>
              
            </div>
        
         
            <div class="paym_row" *ngFor="let card of cards; let i=index">
              <div class="row" >
                    <div class="col-1 col-sm-1 " style="padding-left: 9px;">
                            <input type="radio"  name="cardId" [(ngModel)]="cardId" value="{{ card.id }}" (click)="OnSelect(card)">
                        </div>
                 
                  <div class="col-7 col-sm-7">
                      <b> <i class="fa fa-credit-card"></i> {{ card.card.brand }} (xxxx-{{ card.card.last4 }})</b>
                  </div>
                  <div class="col-4 col-sm-4">
                      <a style="cursor: pointer" (click)="OnRemove(card)" > <i class="fa fa-trash"></i> Remove</a>
                  </div>
                </div>
            </div>
          <label style="font-size: 8pt; padding-left: 15%">*** Please select one option and click Done</label>
        </div>
        <br> 
        
        
        
        <div class="container">
            <!-- buttons -->     <!-- <button  class="btn btn-success" [disabled]="!selectedcard" style="text-align: right; background-color: #6fad20 " (click)="OnClose()">Done</button> -->
               <div class="adcard_row">
                   <div class="row">
                    <div class="col-md-6 col-6">
                         <button  class="btn btn-primary" (click)="OnAdd()">Add New Card</button>
                    </div>
                    <div class="col-md-6 col-6 text-right">
                         <button  class="btn btn-default"  style="text-align: right; background-color: black; color: white" (click)="OnBack()">Back</button>
                         <button  class="btn btn-success" [disabled]="!selectedcard" style="text-align: right; background-color: #6fad20 " (click)="OnClose()">Done</button>
                    </div>
        
               
                    <div  [hidden]="add == false" style="padding-top: 30px;" class="col-md-12" >
                        
            <!-- <h6 >Add a New Card</h6><br> -->
                <form #paymentForm="ngForm" (ngSubmit)="formHandler()" class="checkout"  >
                    <div class="crdcard">
                        <h3>Pay with Credit or Debit Card</h3>
                        <div class="embed-responsive" id="card-element" #cardElement></div>
                        <div id="card-errors" class="help is-danger" role="alert" *ngIf="formError">{{ formError }}</div>
        
                         <div *ngIf="totalAmount; then pay else save;">
                        <!-- ng-template appears here -->
                    </div>
        
                    </div>
                     
                  
                   
                </form>
                  
             
        
        
                    </div>
                </div>
               </div> 
                
            
          
        
                  
                  
            <!-- Template when Charging Card -->
                  
            <ng-template #pay>
                    
                <button type="submit"  class="button is-info" [disabled]="!formComplete || loading" [class.is-loading]="loading">
                  
                        <!-- Pay {{ totalAmount | stripe | currency }} -->
                  
                </button>
                  
            </ng-template>
                  
                  
            <!-- Template when Saving Card for Later Use -->
                  
            <ng-template #save >
                <div style="text-align: right">
                <button type="submit" class="btn btn-primary" [disabled]="!formComplete || loading" [class.is-loading]="loading">
                  
                        Save Card
                        <span [hidden]="!loading">
                            <i class="fa fa-spinner fa-spin fa-1x fa-fw"></i>
                        </span>
                </button>
                </div> 
        
                <!-- Sucess/Error messages -->
                <div *ngIf="result" class="p-3 mt-2 bg-success text-white">
                    <!-- Attached payment source {{ result.id }} -- {{ result.card.brand }} ending in {{ result.card.last4 }} -->
                     {{ this.result }}
                  </div>  
                
                <!-- If error, show the user the raw error msg from Stripe -->
                <div *ngIf="errMsg" class="p-3 mt-2 bg-danger text-white">
                    {{ errMsg }}
                </div>
           
            </ng-template>
        </div>
        </div>
        
        <!-- footer -->
        <app-footer style="width: 100%; bottom: 0; "></app-footer>
        
        
        
        
        
          
          
          
          
          
          